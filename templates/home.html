<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <title>home</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="author" content="shell">
  </head>

  <body>
    <table>
      <tr>
	<td>name</td><td>status</td><td>processes</td>
	<td>cache</td><td>rss</td><td>memory</td><td>cpu time</td>
	<td>network device</td><td>ipaddr</td><td>rootfs</td>
	<td>config</td>
      </tr>
      % for name, info in infos.iteritems():
      <tr>
	<td><a href="/info/${name}">${name}</a></td>
	<td>
	% if info['state'] == 'RUNNING':
	  <a href="/shutdown/${name}">
	% elif info['state'] == 'STOPPED':
	  <a href="/start/${name}">
	% endif
	  ${info['state']}</a>
	</td>
	<td>
	  % if info['state'] == 'RUNNING':
	    <a href="/ps/${name}">${len(info['pids'])}</a>
	  % else:
	    --
	  % endif
	</td>
	<td>
	  % if info['state'] == 'RUNNING':
	    ${rs(info.get('cache'))}
	  % else:
	    --
	  % endif
	</td>
	<td>
	  % if info['state'] == 'RUNNING':
	    ${rs(info.get('rss'))}
	  % else:
	    --
	  % endif
	</td>
	<td>
	  % if info['state'] == 'RUNNING':
	    ${rs(info.get('memory'))}
	  % else:
	    --
	  % endif
	</td>
	<td>${info.get('cpu_usage')}</td>
	<td>${info.get('netset')}</td>
	<td>${'%s/%s' % info.get('ipaddr', [('',''),])[0]}</td>
	<td>${info.get('lxc.rootfs', [])[-1]}</td>
	<td><a href="/config/${name}">config</a></td>
      </tr>
      % endfor
    </table>
  </body>
</html>
